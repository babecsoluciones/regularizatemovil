<!DOCTYPE html>
<html >
<head>
  <!-- Site made with Mobirise Website Builder v4.7.9, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.7.9, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/logo2.png" type="image/x-icon">
  <meta name="description" content="">
  <title>Negocios</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/datatables/data-tables.bootstrap4.min.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  
  <script src="js/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
  
</head>
<body>
  <section class="menu cid-qZIB8rJGNL" once="menu" id="menu2-3">

    

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                
                
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown nav-right navbar-nav-top-padding" data-app-modern-menu="true"><li class="nav-item">
                    <a class="nav-link link text-black display-4" href="index.html"><span class="mbri-home mbr-iconfont mbr-iconfont-btn"></span>
                        Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link link text-black display-4" href="negocios.html"><span class="mbri-shopping-basket mbr-iconfont mbr-iconfont-btn"></span>Negocios</a>
                </li><li class="nav-item"><a class="nav-link link text-black display-4" href="promociones.html"><span class="mbri-sale mbr-iconfont mbr-iconfont-btn"></span>Promociones</a></li><li class="nav-item"><a class="nav-link link text-black display-4" href="empleo.html"><span class="mbri-edit mbr-iconfont mbr-iconfont-btn"></span>Bolsa de Trabajo</a></li><li class="nav-item"><a class="nav-link link text-black display-4" href="capacitacion.html"><span class="mbri-responsive mbr-iconfont mbr-iconfont-btn"></span>Capacitaci√≥n</a></li></ul>
            
        </div>
    </nav>
</section>

    <section class="features3 cid-qZIELtS7K5" id="features3-r">

    <div class="container" id="catalogo">
        <h2 class="mbr-section-title mbr-fonts-style align-center pb-3 display-2">
          Negocios</h2>
        <div class="media-container-row" id="cursos">
            <center><img src="ldrs/loader.gif"></center>
        </div>
    </div>
</section>
    
    <section class="section-table cid-qZIDa1zj4m" id="table1-o">
  <div class="container container-table" id="tabla" style="display:none;">
      <h2 class="mbr-section-title mbr-fonts-style align-center pb-3 display-2">
          Negocios</h2>
      
      <div class="table-wrapper">
        <div class="container">
          <div class="row search">
            <div class="col-md-6"></div>
            <div class="col-md-6">
                <div class="dataTables_filter">
                  <input type="button" onclick="resetear()" value="Borrar filtro">
                </div>
            </div>
          </div>
        </div>

        <div class="container scroll" id="myTable">
          <center><img src="ldrs/loader.gif"></center>
        </div>
        
      </div>
    </div>
</section>

    <div style="display:none;">
    <form id="test" name="test" method="post">
<input type="hidden" id="tipo" name="tipo" readonly value="cata-neg"><br>
<input type="hidden" id="valor" name="valor" readonly ><br>
        </form>
    </div>

  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/datatables/jquery.data-tables.min.js"></script>
  <script src="assets/datatables/data-tables.bootstrap4.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="js/aplicacion.js"></script>
  
  <script type="application/javascript">
	
		function enviar(cadena)
		{
            var tipo = document.getElementById('tipo').value;
			$.ajax({
				type: "POST",
				url: "https://regularizate.org/negocios/api/",
				data: cadena,
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success: function(data){
					
                    if(tipo=='cata-neg')
                        {
                            
                            document.getElementById('cursos').innerHTML = "";
                            for(var i=0;i<data.length;i++)
                            {
                                var valor = data[i].valor,
                                    imagen = data[i].imagen;
                                
                                var indice = i;
                                
                                var activo = (i==0) ? 'active' : '';
                                
                                catalogo(valor, imagen);
                            }
                        }
                    if(tipo=='cons-neg')
                        {
                            document.getElementById('myTable').innerHTML = "";
                            document.getElementById('myTable').innerHTML = "<center><input type=\"button\" onclick=\"resetear()\" value=\"Borrar filtros\"></center>";
                            for(var i=0;i<data.length;i++)
                            {
                                var codigo = data[i].codigo,
                                    nombre = data[i].nombre,
                                    logotipo = data[i].logotipo,
                                    categoria = data[i].categoria,
                                    domicilio = data[i].domicilio,
                                    horario = data[i].horario,
                                    direccion = data[i].direccion,
                                    descripcion = data[i].descripcion,
                                    fotos = data[i].fotos,
                                    web = data[i].web;
                                    
                                myFunction(codigo,logotipo, nombre, categoria, domicilio, direccion, fotos, web, horario,descripcion);
                            }
                        }
                    
				},
				failure: function(errMsg) {
					alert('Error al obtener los datos.\nComprueba tu enlace a internet');
				}
			});
		}
		
		function toJSONString( form ,res) {
  		var form1 = document.getElementById(form);
		var obj = {};
		var elements = form1.querySelectorAll( "input, select, textarea" );
		for( var i = 0; i < elements.length; ++i ) {
			var element = elements[i];
			var name = element.name;
			var value = element.value;

			if( name ) {
				obj[ name ] = value;
			}
		}
			
			enviar(JSON.stringify( obj ));
            
	}
        
        function myFunction(codigo,logotipo, nombre, categoria, domicilio, direccion, fotos, web, horario,descripcion) {
    
            var destino = document.getElementById('myTable');
            
            var contenido = '';
            
            contenido += '<div class="card p-3 col-12 col-md-6 col-lg-3">';
            contenido += '    <table>';
            contenido += '        <tr  onclick="buscarNegocio(\''+codigo+'\')">';
            contenido += '          <td rowspan="3" align="center" valign="middle"><a href="#" onclick="buscarNegocio(\''+codigo+'\')">  <img src="'+logotipo+'" alt="Regularizate" width="75" height="75" ></a></td>';
            contenido += '        </td>';
            contenido += '        <td colspan="3">';
            contenido += '          '+nombre+'';
            contenido += '        </td>';
            contenido += '        </tr>';
            contenido += '        <tr onclick="buscarNegocio(\''+codigo+'\')">';
            contenido += '        <td colspan="3">';
            contenido += '        '+direccion+'</td>';
            contenido += '        </tr>';
            contenido += '        <tr  onclick="buscarNegocio(\''+codigo+'\')">';
            contenido += '        <td colspan="3">';
            contenido += '        '+descripcion+'</td>';
            contenido += '        </tr>';
            contenido += '        <tr>';
            contenido += '          <td>';
            contenido += '          Serv. a Dom. '+domicilio;
            contenido += '          </td>';
            contenido += '          <td>';
            contenido += '          Fotos '+fotos;
            contenido += '          </td>';
            contenido += '          <td>';
            contenido += '          Sitio web. <a href="'+web+'">Ver sitio</a>';
            contenido += '          </td>';
            contenido += '        </tr>';
            contenido += '    </table>';
            contenido += '    </div>';
    
    destino.innerHTML += contenido;
   
}
      
        function catalogo(valor, imagen) {
    var slider = document.getElementById("cursos");
            
    var contenido = '';
            
            contenido += '<div class="card p-3 col-12 col-md-6 col-lg-3">';
            contenido += '    <div class="card-wrapper">';
            contenido += '        <div class="card-img">';
            contenido += '          <a href="#" onclick="seccion(\''+valor+'\',\'cons-neg\')">  <img src="'+imagen+'" alt="Regularizate" ></a>';
            contenido += '        </div>';
            contenido += '        <div class="card-box">';
            contenido += '            <center><b>'+valor+'</b></center>';
            contenido += '            ';
            contenido += '        </div>';
            contenido += '        <div class="mbr-section-btn text-center">';
            contenido += '              ';
            contenido += '              ';
            contenido += '              ';
            contenido += '        </div>';
            contenido += '    </div>';
            contenido += '</div>';
                    
    
    slider.innerHTML += contenido;
}
      function seccion(valor, tipo)
      {
          document.getElementById('tipo').value = tipo;
          document.getElementById('valor').value = valor;
          
          document.getElementById('catalogo').style.display = 'none';
          document.getElementById('tabla').style.display = 'inline';
          
          document.getElementById('features3-r').style.display='none';
          
          toJSONString('test','res');
      }
      
      function resetear()
      {
          document.getElementById('tipo').value = "cata-neg";
          document.getElementById('valor').value = "";
          window.location="negocios.html";
          toJSONString('test','res');
      }
      toJSONString('test','res');
	
	</script>
</body>
</html>